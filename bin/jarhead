#!/usr/bin/env ruby
$:.unshift File.join(File.dirname(__FILE__), *%w[.. lib])
require 'jarhead'

module Jarhead
  class CLI

    def compile
      Jarhead::Compiler.new.compile
    end

    def run( klass )
      Jarhead::Compiler.new.run klass
    end

  end
end

command = ARGV[0]
args = ARGV.drop(1) if ARGV.size > 1

# instance methods of Jarhead::CLI are commands in the cli
Jarhead::CLI.instance_methods(false).each do |name|
  next if ARGV[0] != name.to_s
  begin
    Jarhead::CLI.new.public_send name, *ARGV.drop(1)
  rescue ArgumentError => e
    puts "#{name}: #{e.message}".red
  end
end