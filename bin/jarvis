#!/usr/bin/env ruby
$:.unshift File.join(File.dirname(__FILE__), *%w[.. lib])
require 'jarvis'

module Jarvis
  class CLI

    def compile
      Jarvis::Compiler.new.compile
    end

    def run( klass )
      Jarvis::Compiler.new.run klass
    end

    # Sexy and Simple Command Parsing #
    ###################################

    self.instance_methods(false).each do |name|
      next if ARGV[0] != name.to_s
      begin
        self.new.public_send name, *ARGV.drop(1)
      rescue ArgumentError => e
        puts "#{name}: #{e.message}".red
      end
    end

  end
end